import{j as e,r as h,c as E}from"./client.js";const T=({gameState:s,username:r})=>{const{currentQuestion:d,phase:o,phaseEndsAt:i}=s,t=()=>{const x=Date.now(),g=Math.max(0,i-x),m=Math.floor(g/(1e3*60*60)),u=Math.floor(g%(1e3*60*60)/(1e3*60));return m>0?`${m}h ${u}m`:`${u}m`},c=()=>{switch(o){case"submission":return"Submissions Phase";case"voting":return"Voting Phase";case"results":return"Results Phase";default:return""}},l=()=>{switch(o){case"submission":return`Submit your creative wrong answer! Time remaining: ${t()}`;case"voting":return`Vote for your favorite wrong answers! Time remaining: ${t()}`;case"results":return"Check out the results and see who won!";default:return""}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium",children:d.category}),e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:c()})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:d.text}),e.jsx("p",{className:"text-gray-600 text-sm",children:l()})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Welcome,"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r})]})]}),o==="submission"&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," The goal is to be creative and funny! The most entertaining wrong answer will win."]})}),o==="voting"&&e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["ðŸ—³ï¸ ",e.jsx("strong",{children:"Vote:"})," You can vote for up to 3 answers. You cannot vote for your own submission."]})}),o==="results"&&e.jsx("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-800",children:["ðŸ† ",e.jsx("strong",{children:"Results:"})," The winner has been crowned! Check out the leaderboard below."]})})]})},R=({gameState:s,username:r,onSubmit:d})=>{const[o,i]=h.useState(""),[t,c]=h.useState(!1),[l,x]=h.useState(!1),g=async b=>{if(b.preventDefault(),!(!o.trim()||t)){c(!0);try{await d(o.trim())&&(x(!0),i(""))}finally{c(!1)}}},m=s.submissions.find(b=>b.odname===r),u=s.phase==="submission"&&!m&&!l;if(m||l){const b=m||{answer:"Your answer has been submitted!"};return e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-lg font-semibold text-green-800",children:"Answer Submitted!"})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-green-100",children:e.jsxs("p",{className:"text-gray-900 italic",children:['"',b.answer,'"']})}),e.jsx("p",{className:"text-sm text-green-700 mt-3",children:"Come back during the voting phase to vote for your favorites!"})]})}return u?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6 border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Submit Your Wrong Answer"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("textarea",{value:o,onChange:b=>i(b.target.value),placeholder:"Type your creative wrong answer here... (280 characters max)",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 resize-none transition-colors",rows:3,maxLength:280,disabled:t}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[o.length,"/280 characters"]}),e.jsx("span",{className:"text-sm text-gray-500",children:"Be creative, funny, and completely wrong!"})]})]}),e.jsx("button",{type:"submit",disabled:!o.trim()||t,className:"w-full bg-orange-500 text-white py-3 px-6 rounded-lg font-medium hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:t?"Submitting...":"Submit Answer"})]}),e.jsx("div",{className:"mt-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Remember:"})," The goal is to be creative and entertaining! The most popular wrong answer wins."]})})]}):null},$=({submission:s,currentUsername:r,phase:d,onVote:o,hasVoted:i,userVotes:t})=>{const c=s.odname===r,l=t.includes(s.id),x=d==="voting"&&!c&&!i&&!l,g=async()=>{x&&await o(s.id)},m=d==="results",u=d==="results";return e.jsxs("div",{className:`bg-white rounded-lg shadow-md p-4 mb-3 border transition-all ${l?"border-orange-400 bg-orange-50":"border-gray-200"} ${x?"hover:shadow-lg hover:border-orange-300 cursor-pointer":""}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-gray-900 text-lg mb-2",children:['"',s.answer,'"']}),u&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("span",{className:"font-medium",children:["â€” ",s.odname]}),s.votes>0&&e.jsxs("span",{className:"text-orange-600 font-semibold",children:["ðŸ† ",s.votes," vote",s.votes!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[x&&e.jsxs("button",{onClick:g,className:"bg-orange-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-orange-600 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z"})}),"Vote"]}),l&&e.jsx("div",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:"âœ“ Voted"}),c&&d==="voting"&&e.jsx("div",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm font-medium",children:"Your Answer"}),m&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.votes}),e.jsxs("div",{className:"text-xs text-gray-500",children:["vote",s.votes!==1?"s":""]})]})]})]}),m&&s.votes>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:s.votes===1?"1 person voted":`${s.votes} people voted`}),s.votes===1&&e.jsx("span",{className:"text-orange-600 font-medium",children:"ðŸ‘‘ Winner!"})]})})]})},S=({gameState:s,currentUsername:r,onVote:d,userVotes:o})=>{var l,x,g;const{phase:i,submissions:t}=s;if(t.length===0)return e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-2",children:e.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i==="submission"?"No answers yet":"No answers submitted"}),e.jsx("p",{className:"text-gray-600",children:i==="submission"?"Be the first to submit a creative wrong answer!":"No one submitted an answer for this question."})]});const c=[...t].sort((m,u)=>i==="results"?u.votes-m.votes:0);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[i==="submission"&&`${t.length} Answer${t.length!==1?"s":""} Submitted`,i==="voting"&&`${t.length} Answer${t.length!==1?"s":""} to Vote On`,i==="results"&&"Final Results"]}),i==="voting"&&e.jsxs("div",{className:"text-sm text-gray-600",children:[3-o.length," vote",3-o.length!==1?"s":""," remaining"]})]}),c.map(m=>e.jsx($,{submission:m,currentUsername:r,phase:i,onVote:d,hasVoted:o.length>=3,userVotes:o},m.id)),i==="results"&&c[0]&&c[0].votes>0&&e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-orange-50 to-yellow-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-3xl",children:"ðŸ†"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-orange-900",children:"Today's Winner!"}),e.jsxs("p",{className:"text-orange-700",children:[(l=c[0])==null?void 0:l.odname," with ",(x=c[0])==null?void 0:x.votes," vote",(((g=c[0])==null?void 0:g.votes)??0)!==1?"s":""]})]})]})})]})},M=({leaderboard:s,currentPlayerStats:r})=>{const d=t=>{switch(t){case 1:return"ðŸ¥‡";case 2:return"ðŸ¥ˆ";case 3:return"ðŸ¥‰";default:return`#${t}`}},o=t=>{switch(t){case 1:return"text-yellow-600 bg-yellow-50 border-yellow-200";case 2:return"text-gray-600 bg-gray-50 border-gray-200";case 3:return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-gray-700 bg-gray-50 border-gray-200"}},i=r?s.findIndex(t=>t.odname===r.odname)+1:null;return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 border border-gray-200",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:"ðŸ† Leaderboard"}),s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ†"}),e.jsx("p",{children:"No champions yet!"}),e.jsx("p",{className:"text-sm",children:"Be the first to win a game!"})]}):e.jsxs("div",{className:"space-y-2",children:[s.map((t,c)=>{const l=c+1,x=r&&t.odname===r.odname;return e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all ${x?"bg-orange-50 border-orange-300 shadow-md":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${o(l)}`,children:d(l)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[t.odname,x&&e.jsx("span",{className:"ml-2 text-xs bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:"You"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t.totalSubmissions," submissions â€¢ ",t.totalVotesReceived," votes received"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg text-orange-600",children:t.wins}),e.jsxs("div",{className:"text-xs text-gray-500",children:["win",t.wins!==1?"s":""]})]})]},t.odname)}),i&&i>10&&r&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("div",{className:"bg-orange-50 border border-orange-300 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-orange-200 text-orange-800 flex items-center justify-center text-sm font-bold",children:["#",i]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-gray-900",children:[r.odname," (You)"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[r.totalSubmissions," submissions â€¢ ",r.totalVotesReceived," votes received"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg text-orange-600",children:r.wins}),e.jsxs("div",{className:"text-xs text-gray-500",children:["win",r.wins!==1?"s":""]})]})]})})})]}),r&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Your Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Current Streak:"}),e.jsxs("span",{className:"ml-2 font-medium text-blue-800",children:[r.currentStreak," day",r.currentStreak!==1?"s":""]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Longest Streak:"}),e.jsxs("span",{className:"ml-2 font-medium text-blue-800",children:[r.longestStreak," day",r.longestStreak!==1?"s":""]})]})]})]})})]})},W=()=>{const[s,r]=h.useState(null),[d,o]=h.useState(""),[i,t]=h.useState(!0),[c,l]=h.useState(""),[x,g]=h.useState([]),[m,u]=h.useState(null),[b,p]=h.useState([]),[f,L]=h.useState(!1),N=async()=>{try{const a=await fetch("/api/game");if(!a.ok)throw new Error("Failed to fetch game state");const n=await a.json();r(n),o(n.username||"anonymous"),t(!1)}catch(a){l(a instanceof Error?a.message:"Unknown error"),t(!1)}},V=async a=>{try{const n=await fetch("/api/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:a})});if(!n.ok){const j=await n.json();return l(j.error||"Failed to submit answer"),!1}const w=await n.json();return s&&r({...s,submissions:[...s.submissions,w.data]}),!0}catch(n){return l(n instanceof Error?n.message:"Unknown error"),!1}},y=async a=>{try{const n=await fetch("/api/vote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({submissionId:a})});if(!n.ok){const j=await n.json();return l(j.error||"Failed to vote"),!1}const w=await n.json();return s&&r({...s,submissions:s.submissions.map(j=>j.id===w.data.submissionId?{...j,votes:j.votes+1}:j)}),!0}catch(n){return l(n instanceof Error?n.message:"Unknown error"),!1}},v=async()=>{try{const a=await fetch("/api/leaderboard");if(!a.ok)throw new Error("Failed to fetch leaderboard");const n=await a.json();g(n)}catch(a){l(a instanceof Error?a.message:"Unknown error")}},k=async()=>{try{const a=await fetch("/api/player-stats");if(!a.ok)throw new Error("Failed to fetch player stats");const n=await a.json();u(n)}catch(a){l(a instanceof Error?a.message:"Unknown error")}},C=()=>{N(),v(),k()};return h.useEffect(()=>{N(),v(),k()},[]),h.useEffect(()=>{if(s){const a=s.submissions.filter(n=>n.voterIds.includes(d)).map(n=>n.id);p(a)}},[s,d]),i?e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading Wrong Answers Only..."})]})}):c?e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto border border-red-200",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:c}),e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors",children:"Try Again"})]})}):s?e.jsx("div",{className:"min-h-screen bg-gray-100",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸŽ¯ Wrong Answers Only"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>L(!f),className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors",children:f?"Game":"Leaderboard"}),e.jsx("button",{onClick:C,className:"bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors",children:"Refresh"})]})]}),e.jsx(T,{question:s.currentQuestion,phase:s.phase,phaseEndsAt:s.phaseEndsAt})]}),s.phase==="submission"&&e.jsx(R,{gameState:s,username:d,onSubmit:V}),s.phase==="voting"&&e.jsx(S,{gameState:s,currentUsername:d,onVote:y,userVotes:b}),s.phase==="results"&&e.jsx(S,{gameState:s,currentUsername:d,onVote:y,userVotes:b}),f&&e.jsx(M,{leaderboard:x,currentPlayerStats:m,onRefresh:v})]})}):e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¯"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Wrong Answers Only"}),e.jsx("p",{className:"text-gray-600",children:"Game not found or still initializing..."})]})})},A=document.getElementById("root");A&&E.createRoot(A).render(e.jsx(W,{}));
//# sourceMappingURL=game.js.map
